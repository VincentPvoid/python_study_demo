# note
游戏文本提取  
并不涉及解包解密之类的过程，只是很简单的转换，不过之前没试过所以还是记录一下  


## ebm文件转换
找到保存事件对话文本的文件，很容易看出是在Event文件夹下，按语言分类放置  
其中的`ebm`后缀文件就是需要转换的  

使用十六进制编辑器（如imhex）打开，可以直接在右侧看到转换出来的文字  
注意：imhex（截止到1.37.4还）不支持直接预览中文，为了方便查看最好使用英文版文件

`ebm`文件无加密，可以直接提取需要的文字  

- 非目标可读字节间隔块  
文件开头必定为间隔块  
长度为4的倍数，后2位为 `00` 或 `FF`  
每4位分为一组，检查后2位，直到后两位不是 `00` 或 `FF`

- 目标可读文字  
最后会补位 `00`  
从开始一直读到出现 `00` 表示结束


## 保存为txt文件
遍历目标根目录文件夹下的所有`ebm`文件  
原文件按人物和结局等方式分类文件夹，文件夹下有多个`ebm`文件  
为了方便查看，转换后就把同一文件夹下的`ebm`文件都保存在同一个`txt`文件中了  
即  
root\xx_lang\aa_01\bb.ebm -> export\xx_lang\aa_01.txt  
txt文字块标题为 xxx.ebm

